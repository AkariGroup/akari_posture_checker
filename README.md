
# akari_posture_checker

Akariを使ってリアルタイムで姿勢を分析し、ユーザーの悪い姿勢を改善するためのアプリです

## 概要
- **カメラに座っている状態の身体が収まるようにする**
- **猫背を3回検知するとストレッチを促すためのアラームが鳴る**  
- **1時間以上の着席を検知するとストレッチを促すためのアラームが鳴る**  


## セットアップ手順
1.  **リポジトリのクローン**
    ```bash
    git clone https://github.com/AkariGroup/akari_posture_checker.git
    cd akari_posture_checker
    ```

2.  **Pythonライブラリのインストール**
    ```bash
    pip install -r requirements.txt
    ```

3. 音声ファイルを配置  
   `sound` フォルダを作成し、以下の `.wav` ファイルを格納します。  
   ```
   .
   ├── main.py
   └── sound/
       ├── siren_long.wav   (警告音ループ再生)
       ├── siren_short.wav  (短い警告音)
       └── reset.wav        (立ち上り通知音)
   ```

---

## 起動方法
1.  ターミナルで以下のコマンドを実行します。

    ```bash
    python3 main.py
    ```

2.  カメラの映像ウィンドウが表示され、姿勢チェックが開始されます。
3.  プログラムを終了するには、表示されたウィンドウを選択した状態で `q` キーを押してください。

---

## 使い方
- **自動サイドアングル検出**  
  体が左右どちらを向いているかを自動で判定し、最適なランドマークを選択して角度を計算します。

- **猫背（悪い姿勢）の検知**  
  `鼻 - 肩 - 腰` の角度がしきい値（デフォルト: 130°）を下回ると「悪い姿勢」と判定します。  
  - 3回検知されると、警告音 (`siren_long.wav`) がループ再生されます。

- **立ち姿勢の検知**  
  `膝 - 腰 - 肩` の角度がしきい値（デフォルト: 170°）を超えると「立ち姿勢」と判定します。  
  - 座り姿勢から立ち姿勢に切り替わった瞬間に、通知音 (`reset.wav`) が再生されます。

- **長時間の座位リマインダー**  
  一定時間（デフォルト: 1時間）以上座り続けると「Stretch Time!」を表示し、警告音 (`siren_long.wav`) をループ再生します。

- **画面表示 (OSD)**  
  - 現在の姿勢状態（良い / 悪い / 立っている）  
  - 猫背の検知回数  
  - 体の角度（2種類）  
  - 座位時間（`HH:MM:SS`）を常時表示

- **AKARIロボット連携**  
起動時にAKARIに接続し、頭部（カメラ）を初期位置（pan=0, tilt=0）に設定します。

## その他
このアプリケーションは愛知工業大学 情報科学部 知的制御研究室により作成されたものです。  
